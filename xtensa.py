b'IwojIElEQVB5dGhvbiBYdGVuc2EgcHJvY2Vzc29yIG1vZHVsZQojIGh0dHBzOi8vZ2l0aHViLmNvbS90aGVtYWRpbnZlbnRvci9pZGEteHRlbnNhCiMKIyBDb3B5cmlnaHQgKEMpIDIwMTQgRnJlZHJpayBBaGxiZXJnCiMKIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdCB1bmRlcgojIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlCiMgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIwojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQgV0lUSE9VVAojIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTCiMgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhbG9uZyB3aXRoCiMgdGhpcyBwcm9ncmFtOyBpZiBub3QsIHdyaXRlIHRvIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIEluYy4sIDUxIEZyYW5rbGluCiMgU3RyZWV0LCBGaWZ0aCBGbG9vciwgQm9zdG9uLCBNQSAwMjExMC0xMzAxIFVTQS4KCiMgIHYwLjEgLSBjaGFuZ2VzIGJ5IHRpbmhlYWQKIyAgYnVnIGZpeCBmb3IgJ2w4dWknLCdsMTZzaScsJ2wxNnVpJywnbDMyaScsJ3M4aScsJ3MxNmknIGFuZCAnczMyaScgc2l6ZSBhbmQgc2hpZnQKIyAgYnVnIGZpeCBmb3IgJ3Jzci5lcGMyJywncnNyLmVwYzMnIGRldGVjdGlvbgojICAnaWxsJyBhZGRlZCwgbm9ybWFsbHkgb25lIGNhbiB3b3JrIHdpdGhvdXQKIyAgJ3Jzci5lcGM0JywncnNyLmVwYzUnLCdyc3IuZXBjNicsJ3Jzci5lcGM3JyBhZGRlZAojCiMgIHYwLjIgLSBjaGFuZ2VzIGJ5IHRpbmhlYWQKIyAgYnVnIGZpeCBmb3IgJ2FkZG1pJyBzaXplCiMgIGJ1ZyBmaXggZm9yICdtb3ZpJyBzaXplCiMgIGJ1ZyBmaXggZm9yICdsMzJyJyB3aXRoIG9mZnNldCA+PSAwCiMgIG5vdGU6IG1vdmkubiBhbmQgYWRkaSB3aXRoIHZhbHVlcyBoaWdoZXIgdGhhbiAxMjcgbG9va3MgYml0IHdpcmVkIGluIGNvbXBhcmUgdG8KIyAgICAgICAgeHQtb2JqZHVtcCwgYmV0dGVyIHdvdWxkIGJlIHNvbWV0aGluZyBsaWtlICdyZXQudmFsdWUgPSAweDgwIC0gcmV0LnZhbHVlJwoKaW1wb3J0IGNvcHkKCnRyeToKICAgIGZyb20gaWRhYXBpIGltcG9ydCAqCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGNsYXNzIHByb2Nlc3Nvcl90KG9iamVjdCk6CiAgICAgICAgcGFzcwogICAgZHRfYnl0ZSA9IGR0X3dvcmQgPSBkdF9kd29yZCA9IE5vbmUKICAgIFBSX1NFR1MgPSBQUl9ERUZTRUczMiA9IFBSX1JOQU1FU09LID0gUFJfQURKU0VHUyA9IFBSTl9IRVggPSBQUl9VU0UzMiA9IDAKICAgIEFTSF9IRVhGMyA9IEFTRF9ERUNGMCA9IEFTT19PQ1RGMSA9IEFTQl9CSU5GMyA9IEFTX05PVEFCID0gQVNfQVNDSUlDID0gQVNfQVNDSUlaID0gMAogICAgQ0ZfQ0FMTCA9IENGX0pVTVAgPSBDRl9TVE9QID0gMAogICAgb192b2lkID0gb19yZWcgPSBvX2ltbSA9IG9fZGlzcGwgPSBvX25lYXIgPSBOb25lCgpjbGFzcyBPcGVyYW5kOgogICAgUkVHICAgICA9IDAKICAgIElNTSAgICAgPSAxCiAgICBNRU0gICAgID0gMgogICAgUkVMQSAgICA9IDMKICAgIFJFTEFMICAgPSA0CiAgICBSRUxVICAgID0gNQogICAgTUVNX0lOREVYID0gNgoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0eXBlLCBzaXplLCByc2hpZnQsIHNpemUyID0gMCwgcnNoaWZ0MiA9IDAsIHNpZ25leHQgPSBGYWxzZSwgdnNoaWZ0ID0gMCwgb2ZmID0gMCwgeGxhdGUgPSBOb25lLCBkdCA9IGR0X2J5dGUsIHJlZ2Jhc2UgPSBOb25lKToKICAgICAgICBzZWxmLnR5cGUgPSB0eXBlCiAgICAgICAgc2VsZi5zaXplID0gc2l6ZQogICAgICAgIHNlbGYucnNoaWZ0ID0gcnNoaWZ0CiAgICAgICAgc2VsZi5zaXplMiA9IHNpemUyCiAgICAgICAgc2VsZi5yc2hpZnQyID0gcnNoaWZ0MgogICAgICAgIHNlbGYuc2lnbmV4dCA9IHNpZ25leHQgb3IgKHNlbGYudHlwZSBpbiAoT3BlcmFuZC5SRUxBLCBPcGVyYW5kLlJFTEFMLCBPcGVyYW5kLk1FTSkpCiAgICAgICAgc2VsZi52c2hpZnQgPSB2c2hpZnQKICAgICAgICBzZWxmLm9mZiA9IG9mZgogICAgICAgIHNlbGYueGxhdGUgPSB4bGF0ZQogICAgICAgIHNlbGYuZHQgPSBkdAogICAgICAgIHNlbGYucmVnYmFzZSA9IHJlZ2Jhc2UKCgogICAgZGVmIGJpdGZpZWxkKHNlbGYsIG9wLCBzaXplLCByc2hpZnQpOgogICAgICAgIHZhbCA9IChvcCA+PiByc2hpZnQpICYgKDB4ZmZmZmZmZmYgPj4gKDMyIC0gc2l6ZSkpCiAgICAgICAgcmV0dXJuIHZhbAoKICAgIGRlZiBwYXJzZShzZWxmLCByZXQsIG9wLCBjbWQgPSBOb25lKToKICAgICAgICB2YWwgPSBzZWxmLmJpdGZpZWxkKG9wLCBzZWxmLnNpemUsIHNlbGYucnNoaWZ0KQogICAgICAgIGlmIHNlbGYuc2l6ZTI6CiAgICAgICAgICAgIHZhbCB8PSAoKG9wID4+IHNlbGYucnNoaWZ0MikgJiAoMHhmZmZmZmZmZiA+PiAoMzItc2VsZi5zaXplMikpKSA8PCBzZWxmLnNpemUKCiAgICAgICAgaWYgc2VsZi5zaWduZXh0IGFuZCAodmFsICYgKDEgPDwgKHNlbGYuc2l6ZStzZWxmLnNpemUyLTEpKSk6CiAgICAgICAgICAgIHZhbCA9IC0oKH52YWwpJigoMSA8PCAoc2VsZi5zaXplK3NlbGYuc2l6ZTItMSkpLTEpKS0xCgogICAgICAgIHZhbCA8PD0gc2VsZi52c2hpZnQKICAgICAgICB2YWwgKz0gc2VsZi5vZmYKCiAgICAgICAgaWYgc2VsZi54bGF0ZToKICAgICAgICAgICAgdmFsID0gc2VsZi54bGF0ZSh2YWwpCgogICAgICAgIHJldC5kdHlwID0gc2VsZi5kdAogICAgICAgIGlmIHNlbGYudHlwZSA9PSBPcGVyYW5kLlJFRzoKICAgICAgICAgICAgcmV0LnR5cGUgPSBvX3JlZwogICAgICAgICAgICByZXQucmVnID0gdmFsIGlmIHZhbCA8IDE2IGVsc2UgMTYKICAgICAgICBlbGlmIHNlbGYudHlwZSA9PSBPcGVyYW5kLklNTToKICAgICAgICAgICAgcmV0LnR5cGUgPSBvX2ltbQogICAgICAgICAgICByZXQudmFsdWUgPSB2YWwKICAgICAgICBlbGlmIHNlbGYudHlwZSA9PSBPcGVyYW5kLk1FTToKICAgICAgICAgICAgcmV0LnR5cGUgPSBvX21lbQogICAgICAgICAgICByZXQuYWRkciA9IChjbWQuZWErMysodmFsPDwyKSkmMHhmZmZmZmZmYyBpZiB2YWwgPCAwIGVsc2UgKCgoY21kLmVhKzMrKHZhbDw8MikpLTB4NDAwMDApJjB4ZmZmZmZmZmMpCiAgICAgICAgZWxpZiBzZWxmLnR5cGUgPT0gT3BlcmFuZC5NRU1fSU5ERVg6CiAgICAgICAgICAgIHJldC50eXBlID0gb19kaXNwbAogICAgICAgICAgICByZXQucGhyYXNlID0gc2VsZi5iaXRmaWVsZChvcCwgKnNlbGYucmVnYmFzZSkKICAgICAgICAgICAgcmV0LmFkZHIgPSB2YWwKICAgICAgICBlbGlmIHNlbGYudHlwZSBpbiAoT3BlcmFuZC5SRUxBLCBPcGVyYW5kLlJFTEFMKToKICAgICAgICAgICAgcmV0LnR5cGUgPSBvX25lYXIKICAgICAgICAgICAgcmV0LmFkZHIgPSB2YWwgKyBjbWQuZWEgKyA0IGlmIHNlbGYudHlwZSA9PSBPcGVyYW5kLlJFTEEgZWxzZSAoKGNtZC5lYSYweGZmZmZmZmZjKSs0Kyh2YWw8PDIpKQogICAgICAgIGVsaWYgc2VsZi50eXBlID09IE9wZXJhbmQuUkVMVToKICAgICAgICAgICAgcmV0LnR5cGUgPSBvX25lYXIKICAgICAgICAgICAgcmV0LmFkZHIgPSB2YWwgKyBjbWQuZWEgKyA0CiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigidW5oYW5kbGVkIG9wZXJhbmQgdHlwZSIpOwoKIyBUaGVzZSBtYWdpYyBsb29rdXAgdGFibGVzIGFyZSBkZWZpbmVkIGluIHRhYmxlIDMtMTcgYW5kIDMtMTggKHAuNDEtNDIpIGluCiMgWHRlbnNhIEluc3RydWN0aW9uIFNldCBBcmNoaXRlY3R1cmUgUmVmZXJlbmNlIE1hbnVhbApkZWYgYjRjb25zdCh2YWwpOgogICAgbHV0ID0gKC0xLCAxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCAxMCwgMTIsIDE2LCAzMiwgNjQsIDEyOCwgMjU2KQogICAgcmV0dXJuIGx1dFt2YWxdCgpkZWYgYjRjb25zdHUodmFsKToKICAgIGx1dCA9ICgzMjc2OCwgNjU1MzYsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDEwLCAxMiwgMTYsIDMyLCA2NCwgMTI4LCAyNTYpCiAgICByZXR1cm4gbHV0W3ZhbF0KCmRlZiBtb3ZpX24odmFsKToKICAgIHJldHVybiB2YWwgaWYgdmFsICYgMHg2MCAhPSAweDYwIGVsc2UgLSgweDIwIC0gdmFsICYgMHgxZikKCmRlZiBhZGRpbih2YWwpOgogICAgcmV0dXJuIHZhbCBpZiB2YWwgZWxzZSAtMQoKZGVmIHNoaW1tKHZhbCk6CiAgICByZXR1cm4gMzItdmFsCgpjbGFzcyBJbnN0cihvYmplY3QpOgoKICAgIGZtdF9OT05FICAgICAgICA9ICgzLCAoKSkKICAgIGZtdF9OTk9ORSAgICAgICA9ICgyLCAoKSkKICAgIGZtdF9SUlIgICAgICAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgMTIpLCBPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA4KSwgT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgNCkpKQogICAgZm10X1JSUl9leHR1aSAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCAxMiksIE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpLCBPcGVyYW5kKE9wZXJhbmQuSU1NLCA0LCA4LCAxLCAxNiksIE9wZXJhbmQoT3BlcmFuZC5JTU0sIDQsIDIwLCBvZmY9MSkpKQogICAgZm10X1JSUl9zZXh0ICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCAxMiksIE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDgpLCBPcGVyYW5kKE9wZXJhbmQuSU1NLCA0LCA0LCBvZmY9NykpKQogICAgZm10X1JSUl8xaW1tICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuSU1NLCA0LCA4KSwpKQogICAgZm10X1JSUl8yaW1tICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuSU1NLCA0LCA4KSwgT3BlcmFuZChPcGVyYW5kLklNTSwgNCwgNCkpKQogICAgZm10X1JSUl9pbW1yICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA0KSwgT3BlcmFuZChPcGVyYW5kLklNTSwgNCwgOCkpKQogICAgZm10X1JSUl8yciAgICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA0KSwgT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgOCkpKQogICAgZm10X1JSUl8ycnIgICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCAxMiksIE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpKSkKICAgIGZtdF9SUlJfc2xsICAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgMTIpLCBPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA4KSkpCiAgICBmbXRfUlJSX3NsbGkgICAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDEyKSwgT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgOCksIE9wZXJhbmQoT3BlcmFuZC5JTU0sIDQsIDQsIDEsIDIwLCB4bGF0ZT1zaGltbSkpKQogICAgZm10X1JSUl9zcmFpICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCAxMiksIE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpLCBPcGVyYW5kKE9wZXJhbmQuSU1NLCA0LCA4LCAxLCAyMCkpKQogICAgZm10X1JSUl9zaCAgICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCAxMiksIE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpLCBPcGVyYW5kKE9wZXJhbmQuSU1NLCA0LCA4KSkpCiAgICBmbXRfUlJSX3NzYSAgICAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDgpLCkpCiAgICBmbXRfUlJSX3NzYWkgICAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5JTU0sIDQsIDgsIDEsIDQpLCkpCiAgICBmbXRfUlJJOCAgICAgICAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpLCBPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA4KSwgT3BlcmFuZChPcGVyYW5kLklNTSwgOCwgMTYsIHNpZ25leHQgPSBUcnVlKSkpCiAgICBmbXRfUlJJOF9hZGRtaSAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpLCBPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA4KSwgT3BlcmFuZChPcGVyYW5kLklNTSwgOCwgMTYsIHNpZ25leHQgPSBUcnVlLCB2c2hpZnQ9OCwgZHQ9ZHRfZHdvcmQpKSkKICAgIGZtdF9SUkk4X2kxMiAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgNCksIE9wZXJhbmQoT3BlcmFuZC5JTU0sIDgsIDE2LCA0LCA4LCBkdD1kdF93b3JkKSkpCiAgICBmbXRfUlJJOF9kaXNwICAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpLCBPcGVyYW5kKE9wZXJhbmQuTUVNX0lOREVYLCA4LCAxNiwgdnNoaWZ0PTAsIHJlZ2Jhc2U9KDQsIDgpKSkpCiAgICBmbXRfUlJJOF9kaXNwMTYgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpLCBPcGVyYW5kKE9wZXJhbmQuTUVNX0lOREVYLCA4LCAxNiwgdnNoaWZ0PTEsIGR0PWR0X3dvcmQsIHJlZ2Jhc2U9KDQsIDgpKSkpCiAgICBmbXRfUlJJOF9kaXNwMzIgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpLCBPcGVyYW5kKE9wZXJhbmQuTUVNX0lOREVYLCA4LCAxNiwgdnNoaWZ0PTIsIGR0PWR0X2R3b3JkLCByZWdiYXNlPSg0LCA4KSkpKQogICAgZm10X1JSSThfYiAgICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA4KSwgT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgNCksIE9wZXJhbmQoT3BlcmFuZC5SRUxBLCA4LCAxNikpKQogICAgZm10X1JSSThfYmIgICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA4KSwgT3BlcmFuZChPcGVyYW5kLklNTSwgNCwgNCwgMSwgMTIpLCBPcGVyYW5kKE9wZXJhbmQuUkVMQSwgOCwgMTYpKSkKICAgIGZtdF9SSTE2ICAgICAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgNCksIE9wZXJhbmQoT3BlcmFuZC5NRU0sIDE2LCA4LCBkdD1kdF9kd29yZCkpKQogICAgZm10X0JSSTggICAgICAgID0gKDMsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCAxMiksIE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDgpLCBPcGVyYW5kKE9wZXJhbmQuUkVMQSwgOCwgMTYpKSkKICAgIGZtdF9CUkk4X2ltbSAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgOCksIE9wZXJhbmQoT3BlcmFuZC5JTU0sIDQsIDEyLCB4bGF0ZSA9IGI0Y29uc3QpLCBPcGVyYW5kKE9wZXJhbmQuUkVMQSwgOCwgMTYpKSkKICAgIGZtdF9CUkk4X2ltbXUgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgOCksIE9wZXJhbmQoT3BlcmFuZC5JTU0sIDQsIDEyLCB4bGF0ZSA9IGI0Y29uc3R1KSwgT3BlcmFuZChPcGVyYW5kLlJFTEEsIDgsIDE2KSkpCiAgICBmbXRfQlJJMTIgICAgICAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDgpLCBPcGVyYW5kKE9wZXJhbmQuUkVMQSwgMTIsIDEyKSkpCiAgICBmbXRfUkkxMlMzICAgICAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDgpLCBPcGVyYW5kKE9wZXJhbmQuSU1NLCAxMiwgMTIsIHZzaGlmdD0zKSkpCiAgICBmbXRfQ0FMTCAgICAgICAgPSAoMywgKE9wZXJhbmQoT3BlcmFuZC5SRUxBLCAxOCwgNiksKSkKICAgIGZtdF9DQUxMX3NoICAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFTEFMLCAxOCwgNiksKSkKICAgIGZtdF9DQUxMWCAgICAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgOCksKSkKICAgIGZtdF9SU1IgICAgICAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLklNTSwgOCwgOCksIE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDQpKSkKICAgIGZtdF9SU1Jfc3BlYyAgICA9ICgzLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgNCksKSkKICAgIGZtdF9SUlJOICAgICAgICA9ICgyLCAoT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgMTIpLCBPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA4KSwgT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgNCkpKQogICAgZm10X1JSUk5fYWRkaSAgID0gKDIsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCAxMiksIE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDgpLCBPcGVyYW5kKE9wZXJhbmQuSU1NLCA0LCA0LCB4bGF0ZT1hZGRpbikpKQogICAgZm10X1JSUk5fMnIgICAgID0gKDIsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA0KSwgT3BlcmFuZChPcGVyYW5kLlJFRywgNCwgOCkpKQogICAgZm10X1JSUk5fZGlzcCAgID0gKDIsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA0KSwgT3BlcmFuZChPcGVyYW5kLk1FTV9JTkRFWCwgNCwgMTIsIHZzaGlmdD0yLCByZWdiYXNlPSg0LCA4KSkpKQogICAgZm10X1JJNiAgICAgICAgID0gKDIsIChPcGVyYW5kKE9wZXJhbmQuUkVHLCA0LCA4KSwgT3BlcmFuZChPcGVyYW5kLlJFTFUsIDQsIDEyLCAyLCA0KSkpCiAgICBmbXRfUkk3ICAgICAgICAgPSAoMiwgKE9wZXJhbmQoT3BlcmFuZC5SRUcsIDQsIDgpLCBPcGVyYW5kKE9wZXJhbmQuSU1NLCA0LCAxMiwgMywgNCwgeGxhdGU9bW92aV9uKSkpCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIG9wY29kZSwgbWFzaywgZm10LCBmbGFncyA9IDApOgogICAgICAgIHNlbGYubmFtZSA9IG5hbWUKICAgICAgICBzZWxmLm9wY29kZSA9IG9wY29kZQogICAgICAgIHNlbGYubWFzayA9IG1hc2sKICAgICAgICAoc2VsZi5zaXplLCBzZWxmLmZtdCkgPSBmbXQKICAgICAgICBzZWxmLmZsYWdzID0gZmxhZ3MKCiAgICBkZWYgbWF0Y2goc2VsZiwgb3ApOgogICAgICAgIHJldHVybiAob3AgJiBzZWxmLm1hc2spID09IHNlbGYub3Bjb2RlCgogICAgZGVmIHBhcnNlT3BlcmFuZHMoc2VsZiwgb3BlcmFuZHMsIG9wLCBjbWQgPSBOb25lKToKICAgICAgICBmb3IgcmV0LCBmbXQgaW4gemlwKG9wZXJhbmRzLCBzZWxmLmZtdCk6CiAgICAgICAgICAgIGZtdC5wYXJzZShyZXQsIG9wLCBjbWQpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuICI8SW5zdHIgJXMgJXgvJXg+IiAlIChzZWxmLm5hbWUsIHNlbGYub3Bjb2RlLCBzZWxmLm1hc2spCgpjbGFzcyBYdGVuc2FQcm9jZXNzb3IocHJvY2Vzc29yX3QpOgogICAgaWQgPSAweDgwMDAgKyAxOTkwCiAgICBmbGFnID0gUFJfU0VHUyB8IFBSX0RFRlNFRzMyIHwgUFJfUk5BTUVTT0sgfCBQUl9BREpTRUdTIHwgUFJOX0hFWCB8IFBSX1VTRTMyCiAgICBjbmJpdHMgPSA4CiAgICBkbmJpdHMgPSA4CiAgICBwc25hbWVzID0gWyJ4dGVuc2EiXQogICAgcGxuYW1lcyA9IFsiVGVuc2lsaWNhIFh0ZW5zYSJdCiAgICBzZWdyZWdfc2l6ZSA9IDAKICAgIHRieXRlX3NpemUgPSAwCgogICAgaW5zdHJ1Y19zdGFydCA9IDAKCiAgICBhc3NlbWJsZXIgPSB7CiAgICAgICAgImZsYWciOiBBU0hfSEVYRjMgfCBBU0RfREVDRjAgfCBBU09fT0NURjEgfCBBU0JfQklORjMgfCBBU19OT1RBQgogICAgICAgICAgICB8IEFTX0FTQ0lJQyB8IEFTX0FTQ0lJWiwKICAgICAgICAidWZsYWciOiAwLAogICAgICAgICJuYW1lIjogIkdOVSBhc3NlbWJsZXIiLAogICAgICAgICJvcmlnaW4iOiAiLm9yZyIsCiAgICAgICAgImVuZCI6ICJlbmQiLAogICAgICAgICJjbW50IjogIjsiLAogICAgICAgICJhc2NzZXAiOiAnIicsCiAgICAgICAgImFjY3NlcCI6ICInIiwKICAgICAgICAiZXNjY29kZXMiOiAiXCInIiwKICAgICAgICAiYV9hc2NpaSI6ICIuYXNjaWkiLAogICAgICAgICJhX2J5dGUiOiAiLmJ5dGUiLAogICAgICAgICJhX3dvcmQiOiAiLnNob3J0IiwKICAgICAgICAiYV9kd29yZCI6ICIuaW50IiwKICAgICAgICAiYV9ic3MiOiAiZGZzICVzIiwKICAgICAgICAiYV9zZWciOiAic2VnIiwKICAgICAgICAiYV9jdXJpcCI6ICIuIiwKICAgICAgICAiYV9wdWJsaWMiOiAiIiwKICAgICAgICAiYV93ZWFrIjogIiIsCiAgICAgICAgImFfZXh0cm4iOiAiLmV4dHJuIiwKICAgICAgICAiYV9jb21kZWYiOiAiIiwKICAgICAgICAiYV9hbGlnbiI6ICIuYWxpZ24iLAogICAgICAgICJsYnJhY2UiOiAiKCIsCiAgICAgICAgInJicmFjZSI6ICIpIiwKICAgICAgICAiYV9tb2QiOiAiJSIsCiAgICAgICAgImFfYmFuZCI6ICImIiwKICAgICAgICAiYV9ib3IiOiAifCIsCiAgICAgICAgImFfeG9yIjogIl4iLAogICAgICAgICJhX2Jub3QiOiAifiIsCiAgICAgICAgImFfc2hsIjogIjw8IiwKICAgICAgICAiYV9zaHIiOiAiPj4iLAogICAgICAgICJhX3NpemVvZl9mbXQiOiAic2l6ZSAlcyIsCiAgICB9CgogICAgb3BzID0gKAogICAgICAgICgiYWJzIiwgICAgMHg2MDAxMDAsIDB4ZmYwZjBmLCBJbnN0ci5mbXRfUlJSXzJyciApLAogICAgICAgICgiYWRkIiwgICAgMHg4MDAwMDAsIDB4ZmYwMDBmLCBJbnN0ci5mbXRfUlJSICksCiAgICAgICAgKCJhZGRpIiwgICAweDAwYzAwMiwgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4ICksCiAgICAgICAgKCJhZGRtaSIsICAweDAwZDAwMiwgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4X2FkZG1pICksCiAgICAgICAgKCJhZGR4MiIsICAweDkwMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SUlIgKSwKICAgICAgICAoImFkZHg0IiwgIDB4YTAwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JSUiApLAogICAgICAgICgiYWRkeDgiLCAgMHhiMDAwMDAsIDB4ZmYwMDBmLCBJbnN0ci5mbXRfUlJSICksCiAgICAgICAgKCJhbmQiLCAgICAweDEwMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SUlIgKSwKICAgICAgICAoImJhbGwiLCAgIDB4MDA0MDA3LCAweDAwZjAwZiwgSW5zdHIuZm10X1JSSThfYiApLAogICAgICAgICgiYmFueSIsICAgMHgwMDgwMDcsIDB4MDBmMDBmLCBJbnN0ci5mbXRfUlJJOF9iICksCiAgICAgICAgKCJiYmMiLCAgICAweDAwNTAwNywgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4X2IgKSwKICAgICAgICAoImJicyIsICAgIDB4MDBkMDA3LCAweDAwZjAwZiwgSW5zdHIuZm10X1JSSThfYiApLAogICAgICAgICgiYmJjaSIsICAgMHgwMDYwMDcsIDB4MDBlMDBmLCBJbnN0ci5mbXRfUlJJOF9iYiApLAogICAgICAgICgiYmJzaSIsICAgMHgwMGUwMDcsIDB4MDBlMDBmLCBJbnN0ci5mbXRfUlJJOF9iYiApLAogICAgICAgICgiYmVxIiwgICAgMHgwMDEwMDcsIDB4MDBmMDBmLCBJbnN0ci5mbXRfUlJJOF9iICksCiAgICAgICAgKCJiZXFpIiwgICAweDAwMDAyNiwgMHgwMDAwZmYsIEluc3RyLmZtdF9CUkk4X2ltbSApLCAjIHdhcyBSUkk4CiAgICAgICAgKCJiZXF6IiwgICAweDAwMDAxNiwgMHgwMDAwZmYsIEluc3RyLmZtdF9CUkkxMiApLAogICAgICAgICgiYmdlIiwgICAgMHgwMGEwMDcsIDB4MDBmMDBmLCBJbnN0ci5mbXRfUlJJOF9iICksCiAgICAgICAgKCJiZ2VpIiwgICAweDAwMDBlNiwgMHgwMDAwZmYsIEluc3RyLmZtdF9CUkk4X2ltbSApLAogICAgICAgICgiYmdldSIsICAgMHgwMGIwMDcsIDB4MDBmMDBmLCBJbnN0ci5mbXRfUlJJOF9iICksCiAgICAgICAgKCJiZ2V1aSIsICAweDAwMDBmNiwgMHgwMDAwZmYsIEluc3RyLmZtdF9CUkk4X2ltbXUgKSwKICAgICAgICAoImJnZXoiLCAgIDB4MDAwMGQ2LCAweDAwMDBmZiwgSW5zdHIuZm10X0JSSTEyICksCiAgICAgICAgKCJibHQiLCAgICAweDAwMjAwNywgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4X2IgKSwKICAgICAgICAoImJsdGkiLCAgIDB4MDAwMGE2LCAweDAwMDBmZiwgSW5zdHIuZm10X0JSSThfaW1tICksCiAgICAgICAgKCJibHR1IiwgICAweDAwMzAwNywgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4X2IgKSwKICAgICAgICAoImJsdHVpIiwgIDB4MDAwMGI2LCAweDAwMDBmZiwgSW5zdHIuZm10X0JSSThfaW1tdSApLAogICAgICAgICgiYmx0eiIsICAgMHgwMDAwOTYsIDB4MDAwMGZmLCBJbnN0ci5mbXRfQlJJMTIgKSwKICAgICAgICAoImJuYWxsIiwgIDB4MDBjMDA3LCAweDAwZjAwZiwgSW5zdHIuZm10X1JSSThfYiApLAogICAgICAgICgiYm5vbmUiLCAgMHgwMDAwMDcsIDB4MDBmMDBmLCBJbnN0ci5mbXRfUlJJOF9iICksCiAgICAgICAgKCJibmUiLCAgICAweDAwOTAwNywgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4X2IgKSwKICAgICAgICAoImJuZWkiLCAgIDB4MDAwMDY2LCAweDAwMDBmZiwgSW5zdHIuZm10X0JSSThfaW1tICksCiAgICAgICAgKCJibmV6IiwgICAweDAwMDA1NiwgMHgwMDAwZmYsIEluc3RyLmZtdF9CUkkxMiApLAogICAgICAgICgiYnJlYWsiLCAgMHgwMDQwMDAsIDB4ZmZmMDBmLCBJbnN0ci5mbXRfUlJSXzJpbW0gKSwKICAgICAgICAoImNhbGwwIiwgIDB4MDAwMDA1LCAweDAwMDAzZiwgSW5zdHIuZm10X0NBTExfc2gsIENGX0NBTEwgKSwKICAgICAgICAoImNhbGw0IiwgIDB4MDAwMDE1LCAweDAwMDAzZiwgSW5zdHIuZm10X0NBTExfc2gsIENGX0NBTEwgKSwKICAgICAgICAoImNhbGw4IiwgIDB4MDAwMDI1LCAweDAwMDAzZiwgSW5zdHIuZm10X0NBTExfc2gsIENGX0NBTEwgKSwKICAgICAgICAoImNhbGwxMiIsIDB4MDAwMDM1LCAweDAwMDAzZiwgSW5zdHIuZm10X0NBTExfc2gsIENGX0NBTEwgKSwKICAgICAgICAoImNhbGx4MCIsIDB4MDAwMGMwLCAweGZmZjBmZiwgSW5zdHIuZm10X0NBTExYLCBDRl9DQUxMIHwgQ0ZfSlVNUCApLAogICAgICAgICgiY2FsbHg0IiwgMHgwMDAwZDAsIDB4ZmZmMGZmLCBJbnN0ci5mbXRfQ0FMTFgsIENGX0NBTEwgfCBDRl9KVU1QICksCiAgICAgICAgKCJjYWxseDgiLCAweDAwMDBlMCwgMHhmZmYwZmYsIEluc3RyLmZtdF9DQUxMWCwgQ0ZfQ0FMTCB8IENGX0pVTVAgKSwKICAgICAgICAoImNhbGx4MTIiLDB4MDAwMGYwLCAweGZmZjBmZiwgSW5zdHIuZm10X0NBTExYLCBDRl9DQUxMIHwgQ0ZfSlVNUCApLAogICAgICAgICgiZHN5bmMiLCAgMHgwMDIwMzAsIDB4ZmZmZmZmLCBJbnN0ci5mbXRfTk9ORSApLAogICAgICAgICgiZW50cnkiLCAgMHgwMDAwMzYsIDB4MDAwMGZmLCBJbnN0ci5mbXRfUkkxMlMzICksCiAgICAgICAgKCJlc3luYyIsICAweDAwMjAyMCwgMHhmZmZmZmYsIEluc3RyLmZtdF9OT05FICksCiAgICAgICAgKCJleHR1aSIsICAweDA0MDAwMCwgMHgwZTAwMGYsIEluc3RyLmZtdF9SUlJfZXh0dWkgKSwKICAgICAgICAoImV4dHciLCAgIDB4MDAyMGQwLCAweGZmZmZmZiwgSW5zdHIuZm10X05PTkUgKSwKICAgICAgICAoImlzeW5jIiwgIDB4MDAyMDAwLCAweGZmZmZmZiwgSW5zdHIuZm10X05PTkUgKSwKIyAgICAgICAoImlsbCIsICAgIDB4MDAwMDAwLCAweGZmZmZmZiwgSW5zdHIuZm10X05PTkUgKSwgICAgIyBub3JtYWxseSBvbmUgbm90IG5lZWQgdGhpcwogICAgICAgICgiaiIsICAgICAgMHgwMDAwMDYsIDB4MDAwMDNmLCBJbnN0ci5mbXRfQ0FMTCwgQ0ZfU1RPUCApLAogICAgICAgICgiangiLCAgICAgMHgwMDAwYTAsIDB4ZmZmMGZmLCBJbnN0ci5mbXRfQ0FMTFgsIENGX1NUT1AgfCBDRl9KVU1QICksCiAgICAgICAgKCJsOHVpIiwgICAweDAwMDAwMiwgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4X2Rpc3AgKSwKICAgICAgICAoImwxNnNpIiwgIDB4MDA5MDAyLCAweDAwZjAwZiwgSW5zdHIuZm10X1JSSThfZGlzcDE2ICksCiAgICAgICAgKCJsMTZ1aSIsICAweDAwMTAwMiwgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4X2Rpc3AxNiApLAogICAgICAgICgibDMyaSIsICAgMHgwMDIwMDIsIDB4MDBmMDBmLCBJbnN0ci5mbXRfUlJJOF9kaXNwMzIgKSwKICAgICAgICAoImwzMnIiLCAgIDB4MDAwMDAxLCAweDAwMDAwZiwgSW5zdHIuZm10X1JJMTYgKSwKICAgICAgICAoIm1lbXciLCAgIDB4MDAyMGMwLCAweGZmZmZmZiwgSW5zdHIuZm10X05PTkUgKSwKICAgICAgICAoIm1vdmVxeiIsIDB4ODMwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JSUiApLAogICAgICAgICgibW92Z2V6IiwgMHhiMzAwMDAsIDB4ZmYwMDBmLCBJbnN0ci5mbXRfUlJSICksCiAgICAgICAgKCJtb3ZpIiwgICAweDAwYTAwMiwgMHgwMGYwMGYsIEluc3RyLmZtdF9SUkk4X2kxMiApLAogICAgICAgICgibW92bHR6IiwgMHhhMzAwMDAsIDB4ZmYwMDBmLCBJbnN0ci5mbXRfUlJSICksCiAgICAgICAgKCJtb3ZuZXoiLCAweDkzMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SUlIgKSwKICAgICAgICAoIm11bDE2cyIsIDB4ZDEwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JSUiApLAogICAgICAgICgibXVsMTZ1IiwgMHhjMTAwMDAsIDB4ZmYwMDBmLCBJbnN0ci5mbXRfUlJSICksCiAgICAgICAgKCJtdWxsIiwgICAweDgyMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SUlIgKSwKICAgICAgICAoIm11bHVoIiwgIDB4YTIwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JSUiApLAogICAgICAgICgibmVnIiwgICAgMHg2MDAwMDAsIDB4ZmYwZjBmLCBJbnN0ci5mbXRfUlJSXzJyciApLAogICAgICAgICgibnNhIiwgICAgMHg0MGUwMDAsIDB4ZmZmMDBmLCBJbnN0ci5mbXRfUlJSXzJyICksCiAgICAgICAgKCJuc2F1IiwgICAweDQwZjAwMCwgMHhmZmYwMGYsIEluc3RyLmZtdF9SUlJfMnIgKSwKICAgICAgICAoIm5vcCIsICAgIDB4MDAyMGYwLCAweGZmZmZmZiwgSW5zdHIuZm10X05PTkUgKSwKICAgICAgICAoIm9yIiwgICAgIDB4MjAwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JSUiApLAogICAgICAgICgicmV0IiwgICAgMHgwMDAwODAsIDB4ZmZmZmZmLCBJbnN0ci5mbXRfTk9ORSwgQ0ZfU1RPUCApLAogICAgICAgICgicmV0dy5uIiwgMHgwMGYwMWQsIDB4MDBmZmZmLCBJbnN0ci5mbXRfTk5PTkUsIENGX1NUT1AgKSwKICAgICAgICAoInJmZSIsICAgIDB4MDAzMDAwLCAweGZmZmZmZiwgSW5zdHIuZm10X05PTkUsIENGX1NUT1AgKSwKICAgICAgICAoInJmaSIsICAgIDB4MDAzMDEwLCAweGZmZjBmZiwgSW5zdHIuZm10X1JSUl8xaW1tLCBDRl9TVE9QICksCiAgICAgICAgKCJyc2lsIiwgICAweDAwNjAwMCwgMHhmZmYwMGYsIEluc3RyLmZtdF9SUlJfaW1tciApLAogICAgICAgICgicnNyLnByaWQiLCAgICAgIDB4MDNlYjAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJyc3IuZXBjMSIsICAgICAgMHgwM2IxMDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoInJzci5lcGMyIiwgICAgICAweDAzYjIwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgicnNyLmVwYzMiLCAgICAgIDB4MDNiMzAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJyc3IuZXBjNCIsICAgICAgMHgwM2I0MDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoInJzci5lcGM1IiwgICAgICAweDAzYjUwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgicnNyLmVwYzYiLCAgICAgIDB4MDNiNjAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJyc3IuZXBjNyIsICAgICAgMHgwM2I3MDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoInJzci5wcyIsICAgICAgICAweDAzZTYwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgicnNyLmV4Y2NhdXNlIiwgIDB4MDNlODAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJyc3IuY2NvdW50IiwgICAgMHgwM2U0MDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoInJzci5leGN2YWRkciIsICAweDAzZWUwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgicnNyLmRlcGMiLCAgICAgIDB4MDNjMDAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJyc3IucHJpZCIsICAgICAgMHgwM2ViMDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoInJzci5jY29tcGFyZTAiLCAweDAzZjAwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgicnNyLmludGVycnVwdCIsIDB4MDNlMjAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJyc3IuaW50ZW5hYmxlIiwgMHgwM2U0MDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoInJzci5zYXIiLCAgICAgICAweDAzMDMwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgicnNyLmRkciIsICAgICAgIDB4MDM2ODAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJyc3IiLCAgICAweDAzMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SU1IgKSwKICAgICAgICAoInJzeW5jIiwgIDB4MDAyMDEwLCAweGZmZmZmZiwgSW5zdHIuZm10X05PTkUgKSwKICAgICAgICAoInM4aSIsICAgIDB4MDA0MDAyLCAweDAwZjAwZiwgSW5zdHIuZm10X1JSSThfZGlzcCApLAogICAgICAgICgiczE2aSIsICAgMHgwMDUwMDIsIDB4MDBmMDBmLCBJbnN0ci5mbXRfUlJJOF9kaXNwMTYgKSwKICAgICAgICAoInMzMmkiLCAgIDB4MDA2MDAyLCAweDAwZjAwZiwgSW5zdHIuZm10X1JSSThfZGlzcDMyICksCiAgICAgICAgKCJzZXh0IiwgICAweDIzMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SUlJfc2V4dCApLAogICAgICAgICgic2xsIiwgICAgMHhhMTAwMDAsIDB4ZmYwMGZmLCBJbnN0ci5mbXRfUlJSX3NsbCApLAogICAgICAgICgic2xsaSIsICAgMHgwMTAwMDAsIDB4ZWYwMDBmLCBJbnN0ci5mbXRfUlJSX3NsbGkgKSwKICAgICAgICAoInNyYSIsICAgIDB4YjEwMDAwLCAweGZmMGYwZiwgSW5zdHIuZm10X1JSUl8ycnIgKSwKICAgICAgICAoInNyYWkiLCAgIDB4MjEwMDAwLCAweGVmMDAwZiwgSW5zdHIuZm10X1JSUl9zcmFpICksCiAgICAgICAgKCJzcmMiLCAgICAweDgxMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SUlIgKSwKICAgICAgICAoInNybCIsICAgIDB4OTEwMDAwLCAweGZmMGYwZiwgSW5zdHIuZm10X1JSUl8ycnIgKSwKICAgICAgICAoInNybGkiLCAgIDB4NDEwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JSUl9zaCApLAogICAgICAgICgic3NhOGIiLCAgMHg0MDMwMDAsIDB4ZmZmMGZmLCBJbnN0ci5mbXRfUlJSX3NzYSApLAogICAgICAgICgic3NhOGwiLCAgMHg0MDIwMDAsIDB4ZmZmMGZmLCBJbnN0ci5mbXRfUlJSX3NzYSApLAogICAgICAgICgic3NhaSIsICAgMHg0MDQwMDAsIDB4ZmZmMGVmLCBJbnN0ci5mbXRfUlJSX3NzYWkgKSwKICAgICAgICAoInNzbCIsICAgIDB4NDAxMDAwLCAweGZmZjBmZiwgSW5zdHIuZm10X1JSUl9zc2EgKSwKICAgICAgICAoInNzciIsICAgIDB4NDAwMDAwLCAweGZmZjBmZiwgSW5zdHIuZm10X1JSUl9zc2EgKSwKICAgICAgICAoInN1YiIsICAgIDB4YzAwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JSUiApLAogICAgICAgICgic3VieDIiLCAgMHhkMDAwMDAsIDB4ZmYwMDBmLCBJbnN0ci5mbXRfUlJSICksCiAgICAgICAgKCJzdWJ4NCIsICAweGUwMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SUlIgKSwKICAgICAgICAoInN1Yng4IiwgIDB4ZjAwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JSUiApLAogICAgICAgICgid2FpdGkiLCAgMHgwMDcwMDAsIDB4ZmZmMGZmLCBJbnN0ci5mbXRfUlJSXzFpbW0gKSwKICAgICAgICAoIndkdGxiIiwgIDB4NTBlMDAwLCAweGZmZjAwZiwgSW5zdHIuZm10X1JSUl8yciApLAogICAgICAgICgid2l0bGIiLCAgMHg1MDYwMDAsIDB4ZmZmMDBmLCBJbnN0ci5mbXRfUlJSXzJyICksCiAgICAgICAgKCJ3c3IuaW50ZW5hYmxlIiwgMHgxM2U0MDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoIndzci5saXRiYXNlIiwgICAweDEzMDUwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgid3NyLnZlY2Jhc2UiLCAgIDB4MTNlNzAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJ3c3IucHMiLCAgICAgICAgMHgxM2U2MDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoIndzci5lcGMxIiwgICAgICAweDEzYjEwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgid3NyLmNjb21wYXJlMCIsIDB4MTNmMDAwLCAweGZmZmYwZiwgSW5zdHIuZm10X1JTUl9zcGVjICksCiAgICAgICAgKCJ3c3IuaW50Y2xlYXIiLCAgMHgxM2UzMDAsIDB4ZmZmZjBmLCBJbnN0ci5mbXRfUlNSX3NwZWMgKSwKICAgICAgICAoIndzci5zYXIiLCAgICAgICAweDEzMDMwMCwgMHhmZmZmMGYsIEluc3RyLmZtdF9SU1Jfc3BlYyApLAogICAgICAgICgid3NyIiwgICAgMHgxMzAwMDAsIDB4ZmYwMDBmLCBJbnN0ci5mbXRfUlNSICksCiAgICAgICAgKCJ4b3IiLCAgICAweDMwMDAwMCwgMHhmZjAwMGYsIEluc3RyLmZtdF9SUlIgKSwKICAgICAgICAoInhzciIsICAgIDB4NjEwMDAwLCAweGZmMDAwZiwgSW5zdHIuZm10X1JTUiApLAoKICAgICAgICAoImFkZC5uIiwgICAweDAwMGEsIDB4MDAwZiwgSW5zdHIuZm10X1JSUk4gKSwKICAgICAgICAoImFkZGkubiIsICAweDAwMGIsIDB4MDAwZiwgSW5zdHIuZm10X1JSUk5fYWRkaSApLAogICAgICAgICgiYmVxei5uIiwgIDB4MDA4YywgMHgwMGNmLCBJbnN0ci5mbXRfUkk2ICksCiAgICAgICAgKCJibmV6Lm4iLCAgMHgwMGNjLCAweDAwY2YsIEluc3RyLmZtdF9SSTYgKSwKICAgICAgICAoIm1vdi5uIiwgICAweDAwMGQsIDB4ZjAwZiwgSW5zdHIuZm10X1JSUk5fMnIgKSwKICAgICAgICAoImJyZWFrLm4iLCAweGYwMmQsIDB4ZjBmZiwgSW5zdHIuZm10X1JSUk4gKSwKICAgICAgICAoInJldC5uIiwgICAweGYwMGQsIDB4ZmZmZiwgSW5zdHIuZm10X05OT05FLCBDRl9TVE9QICksCiAgICAgICAgKCJsMzJpLm4iLCAgMHgwMDA4LCAweDAwMGYsIEluc3RyLmZtdF9SUlJOX2Rpc3AgKSwKICAgICAgICAoIm1vdmkubiIsICAweDAwMGMsIDB4MDA4ZiwgSW5zdHIuZm10X1JJNyApLAogICAgICAgICgibm9wLm4iLCAgIDB4ZjAzZCwgMHhmZmZmLCBJbnN0ci5mbXRfTk5PTkUgKSwKICAgICAgICAoInMzMmkubiIsICAweDAwMDksIDB4MDAwZiwgSW5zdHIuZm10X1JSUk5fZGlzcCApLAogICAgKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBwcm9jZXNzb3JfdC5fX2luaXRfXyhzZWxmKQogICAgICAgIHNlbGYuX2luaXRfaW5zdHJ1Y3Rpb25zKCkKICAgICAgICBzZWxmLl9pbml0X3JlZ2lzdGVycygpCgogICAgZGVmIF9hZGRfaW5zdHJ1Y3Rpb24oc2VsZiwgaW5zdHIpOgogICAgICAgIHNlbGYuaW5zdHJzX2xpc3QuYXBwZW5kKGluc3RyKQoKICAgIGRlZiBfaW5pdF9pbnN0cnVjdGlvbnMoc2VsZik6CiAgICAgICAgc2VsZi5pbnN0cnNfbGlzdCA9IFtdCiAgICAgICAgc2VsZi5zaG9ydF9pbnN0cyA9IFtdCiAgICAgICAgc2VsZi5sb25nX2luc3RzID0gW10KCiAgICAgICAgZm9yIG8gaW4gc2VsZi5vcHM6CiAgICAgICAgICAgIGluc3RyID0gSW5zdHIoKm8pCiAgICAgICAgICAgIHNlbGYuX2FkZF9pbnN0cnVjdGlvbihpbnN0cikKICAgICAgICAgICAgaWYgaW5zdHIuc2l6ZSA9PSAyOgogICAgICAgICAgICAgICAgc2VsZi5zaG9ydF9pbnN0cy5hcHBlbmQoaW5zdHIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmxvbmdfaW5zdHMuYXBwZW5kKGluc3RyKQoKICAgICAgICBzZWxmLmluc3RydWMgPSBbeyAibmFtZSI6IGkubmFtZSwgImZlYXR1cmUiOiBpLmZsYWdzIH0gZm9yIGkgaW4gc2VsZi5pbnN0cnNfbGlzdF0KICAgICAgICBzZWxmLmluc3RydWNfZW5kID0gbGVuKHNlbGYuaW5zdHJ1YykKCiAgICAgICAgc2VsZi5pbnN0cnMgPSB7fQogICAgICAgIGZvciBpbnN0ciBpbiBzZWxmLmluc3Ryc19saXN0OgogICAgICAgICAgICBzZWxmLmluc3Ryc1tpbnN0ci5uYW1lXSA9IGluc3RyCgogICAgICAgIHNlbGYuaW5zdHJzX2lkcyA9IHt9CiAgICAgICAgZm9yIGksIGluc3RyIGluIGVudW1lcmF0ZShzZWxmLmluc3Ryc19saXN0KToKICAgICAgICAgICAgc2VsZi5pbnN0cnNfaWRzW2luc3RyLm5hbWVdID0gaQogICAgICAgICAgICBpbnN0ci5pZCA9IGkKCiAgICBkZWYgX2luaXRfcmVnaXN0ZXJzKHNlbGYpOgogICAgICAgIHNlbGYucmVnTmFtZXMgPSBbImElZCIgJSBkIGZvciBkIGluIHJhbmdlKDE2KV0KICAgICAgICBzZWxmLnJlZ05hbWVzICs9IFsicGMiLCAic2FyIiwgIkNTIiwgIkRTIl0KICAgICAgICBzZWxmLnJlZ19pZHMgPSB7fQogICAgICAgIGZvciBpLCByZWcgaW4gZW51bWVyYXRlKHNlbGYucmVnTmFtZXMpOgogICAgICAgICAgICBzZWxmLnJlZ19pZHNbcmVnXSA9IGkKCiAgICAgICAgc2VsZi5yZWdGaXJzdFNyZWcgPSBzZWxmLnJlZ0NvZGVTcmVnID0gc2VsZi5yZWdfaWRzWyJDUyJdCiAgICAgICAgc2VsZi5yZWdMYXN0U3JlZyA9IHNlbGYucmVnRGF0YVNyZWcgPSBzZWxmLnJlZ19pZHNbIkRTIl0KCiAgICBkZWYgX3B1bGxfb3BfYnl0ZShzZWxmKToKICAgICAgICBlYSA9IHNlbGYuY21kLmVhICsgc2VsZi5jbWQuc2l6ZQogICAgICAgIGJ5dGUgPSBnZXRfZnVsbF9ieXRlKGVhKQogICAgICAgIHNlbGYuY21kLnNpemUgKz0gMQogICAgICAgIHJldHVybiBieXRlCgogICAgZGVmIF9maW5kX2luc3RyKHNlbGYpOgogICAgICAgIG9wID0gc2VsZi5fcHVsbF9vcF9ieXRlKCkKICAgICAgICBvcCB8PSBzZWxmLl9wdWxsX29wX2J5dGUoKSA8PCA4CgogICAgICAgIGZvciBpbnN0ciBpbiBzZWxmLnNob3J0X2luc3RzOgogICAgICAgICAgICBpZiBpbnN0ci5tYXRjaChvcCk6CiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdHIsIG9wCgogICAgICAgIG9wIHw9IHNlbGYuX3B1bGxfb3BfYnl0ZSgpIDw8IDE2CgogICAgICAgIGZvciBpbnN0ciBpbiBzZWxmLmxvbmdfaW5zdHM6CiAgICAgICAgICAgIGlmIGluc3RyLm1hdGNoKG9wKToKICAgICAgICAgICAgICAgIHJldHVybiBpbnN0ciwgb3AKCiAgICAgICAgcmV0dXJuIE5vbmUsIG9wCgogICAgZGVmIGFuYShzZWxmKToKICAgICAgICBpbnN0ciwgb3AgPSBzZWxmLl9maW5kX2luc3RyKCkKICAgICAgICBpZiBub3QgaW5zdHI6CiAgICAgICAgICAgIHJldHVybiAwCgogICAgICAgIHNlbGYuY21kLml0eXBlID0gaW5zdHIuaWQKCiAgICAgICAgb3BlcmFuZHMgPSBbc2VsZi5jbWRbaV0gZm9yIGkgaW4gcmFuZ2UoNildCiAgICAgICAgZm9yIG8gaW4gb3BlcmFuZHM6CiAgICAgICAgICAgIG8udHlwZSA9IG9fdm9pZAogICAgICAgIGluc3RyLnBhcnNlT3BlcmFuZHMob3BlcmFuZHMsIG9wLCBzZWxmLmNtZCkKCiAgICAgICAgcmV0dXJuIHNlbGYuY21kLnNpemUKCiAgICBkZWYgZW11KHNlbGYpOgogICAgICAgIGZvciBpIGluIHJhbmdlKDYpOgogICAgICAgICAgICBvcCA9IHNlbGYuY21kW2ldCiAgICAgICAgICAgIGlmIG9wLnR5cGUgPT0gb192b2lkOgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxpZiBvcC50eXBlID09IG9fbWVtOgogICAgICAgICAgICAgICAgdWFfZG9kYXRhMigwLCBvcC5hZGRyLCBvcC5kdHlwKQogICAgICAgICAgICAgICAgdWFfYWRkX2RyZWYoMCwgb3AuYWRkciwgZHJfUikKICAgICAgICAgICAgZWxpZiBvcC50eXBlID09IG9fbmVhcjoKICAgICAgICAgICAgICAgIGZlYXR1cmVzID0gc2VsZi5jbWQuZ2V0X2Nhbm9uX2ZlYXR1cmUoKQogICAgICAgICAgICAgICAgaWYgZmVhdHVyZXMgJiBDRl9DQUxMOgogICAgICAgICAgICAgICAgICAgIGZsID0gZmxfQ04KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZmwgPSBmbF9KTgogICAgICAgICAgICAgICAgdWFfYWRkX2NyZWYoMCwgb3AuYWRkciwgZmwpCgogICAgICAgIGZlYXR1cmUgPSBzZWxmLmNtZC5nZXRfY2Fub25fZmVhdHVyZSgpCiAgICAgICAgaWYgZmVhdHVyZSAmIENGX0pVTVA6CiAgICAgICAgICAgIFF1ZXVlTWFyayhRX2p1bXBzLCBzZWxmLmNtZC5lYSkKICAgICAgICBpZiBub3QgZmVhdHVyZSAmIENGX1NUT1A6CiAgICAgICAgICAgIHVhX2FkZF9jcmVmKDAsIHNlbGYuY21kLmVhICsgc2VsZi5jbWQuc2l6ZSwgZmxfRikKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBvdXRvcChzZWxmLCBvcCk6CiAgICAgICAgaWYgb3AudHlwZSA9PSBvX3JlZzoKICAgICAgICAgICAgb3V0X3JlZ2lzdGVyKHNlbGYucmVnTmFtZXNbb3AucmVnXSkKICAgICAgICBlbGlmIG9wLnR5cGUgPT0gb19pbW06CiAgICAgICAgICAgIGluc3RyID0gc2VsZi5pbnN0cnNfbGlzdFtzZWxmLmNtZC5pdHlwZV0KICAgICAgICAgICAgaWYgaW5zdHIubmFtZSBpbiAoImV4dHVpIiwgImJiY2kiLCAiYmJzaSIsICJzbGxpIiwgInNybGkiLCAic3JhaSIsICJzc2FpIik6CiAgICAgICAgICAgICAgICAjIGJpdCBudW1iZXJzL3NoaWZ0cyBhcmUgYWx3YXlzIGRlY2ltYWwKICAgICAgICAgICAgICAgIE91dExvbmcob3AudmFsdWUsIDEwKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgT3V0VmFsdWUob3AsIE9PRldfSU1NKQogICAgICAgIGVsaWYgb3AudHlwZSBpbiAob19uZWFyLCBvX21lbSk6CiAgICAgICAgICAgIG9rID0gb3V0X25hbWVfZXhwcihvcCwgb3AuYWRkciwgQkFEQUREUikKICAgICAgICAgICAgaWYgbm90IG9rOgogICAgICAgICAgICAgICAgb3V0X3RhZ29uKENPTE9SX0VSUk9SKQogICAgICAgICAgICAgICAgT3V0TG9uZyhvcC5hZGRyLCAxNikKICAgICAgICAgICAgICAgIG91dF90YWdvZmYoQ09MT1JfRVJST1IpCiAgICAgICAgICAgICAgICBRdWV1ZU1hcmsoUV9ub05hbWUsIHNlbGYuY21kLmVhKQogICAgICAgIGVsaWYgb3AudHlwZSA9PSBvX2Rpc3BsOgogICAgICAgICAgICBvdXRfcmVnaXN0ZXIoc2VsZi5yZWdOYW1lc1tvcC5waHJhc2VdKQogICAgICAgICAgICBPdXRMaW5lKCIsICIpCiAgICAgICAgICAgIE91dFZhbHVlKG9wLCBPT0ZfQUREUikKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBvdXQoc2VsZik6CiAgICAgICAgYnVmID0gaW5pdF9vdXRwdXRfYnVmZmVyKDEwMjQpCiAgICAgICAgT3V0TW5lbSgxNSkKCiAgICAgICAgaW5zdHIgPSBzZWxmLmluc3Ryc19saXN0W3NlbGYuY21kLml0eXBlXQoKICAgICAgICBmb3IgaSBpbiByYW5nZSg2KToKICAgICAgICAgICAgaWYgc2VsZi5jbWRbaV0udHlwZSA9PSBvX3ZvaWQ6CiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICAgICAgaWYgaSA+IDA6CiAgICAgICAgICAgICAgICBvdXRfc3ltYm9sKCcsJykKICAgICAgICAgICAgT3V0Q2hhcignICcpCiAgICAgICAgICAgIG91dF9vbmVfb3BlcmFuZChpKQoKICAgICAgICB0ZXJtX291dHB1dF9idWZmZXIoKQogICAgICAgIGN2YXIuZ2xfY29tbSA9IDEKICAgICAgICBNYWtlTGluZShidWYpCgoKZGVmIFBST0NFU1NPUl9FTlRSWSgpOgogICAgcmV0dXJuIFh0ZW5zYVByb2Nlc3NvcigpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgY2xhc3MgRHVtbXlQcm9jZXNzb3IoWHRlbnNhUHJvY2Vzc29yKToKICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgYik6CiAgICAgICAgICAgIFh0ZW5zYVByb2Nlc3Nvci5fX2luaXRfXyhzZWxmKQogICAgICAgICAgICBzZWxmLmIgPSBiCgogICAgICAgIGRlZiBfcHVsbF9vcF9ieXRlKHNlbGYpOgogICAgICAgICAgICByZXR1cm4gc2VsZi5iLnBvcCgwKQoKICAgIGRlZiBkaXNhc20oYik6CiAgICAgICAgZHAgPSBEdW1teVByb2Nlc3Nvcihbb3JkKGNoKSBmb3IgY2ggaW4gYl0pCiAgICAgICAgaW5zdHIsIG9wID0gZHAuX2ZpbmRfaW5zdHIoKQogICAgICAgIGFzc2VydCBpbnN0cgoKICAgICAgICBjbGFzcyBjbWQob2JqZWN0KToKICAgICAgICAgICAgZWEgPSAxMjM0CgogICAgICAgIGluc3RyLm9wZXJhbmRzID0gW10KICAgICAgICBmb3Igb3BlcmFuZCBpbiBpbnN0ci5mbXQ6CiAgICAgICAgICAgIG8gPSBjb3B5LmNvcHkob3BlcmFuZCkKICAgICAgICAgICAgb3BlcmFuZC5wYXJzZShvLCBvcCwgY21kKQogICAgICAgICAgICBpbnN0ci5vcGVyYW5kcy5hcHBlbmQobykKICAgICAgICByZXR1cm4gaW5zdHIKCiAgICBhc3NlcnQgZGlzYXNtKCJceDM2XHg2MVx4MDAiKS5uYW1lID09ICJlbnRyeSIKICAgIGFzc2VydCBkaXNhc20oIlx4ZDBceDA0XHgwMCIpLm5hbWUgPT0gImNhbGx4NCIKICAgIGFzc2VydCBkaXNhc20oIlx4ZTBceDA4XHgwMCIpLm5hbWUgPT0gImNhbGx4OCIKICAgIGFzc2VydCBkaXNhc20oIlx4ZjBceDAwXHgwMCIpLm5hbWUgPT0gImNhbGx4MTIiCiAgICBhc3NlcnQgZGlzYXNtKCJceDFkXHhmMCIpLm5hbWUgPT0gInJldHcubiIKICAgIGFzc2VydCBkaXNhc20oIlx4NTVceGEyXHgyOCIpLm5hbWUgPT0gImNhbGw0IgogICAgYXNzZXJ0IGRpc2FzbSgiXHhlNVx4YzdceDAxIikubmFtZSA9PSAiY2FsbDgiCiAgICBhc3NlcnQgZGlzYXNtKCJceDc1XHgwY1x4YTkiKS5uYW1lID09ICJjYWxsMTIiCiAgICBhc3NlcnQgZGlzYXNtKCJceDAwXHhiYlx4MjMiKS5uYW1lID09ICJzZXh0IgogICAgYXNzZXJ0IGRpc2FzbSgiXHgyMFx4YmFceGEyIikubmFtZSA9PSAibXVsdWgiCiAgICBhc3NlcnQgZGlzYXNtKCJceDJjXHgwOCIpLm5hbWUgPT0gIm1vdmkubiIKICAgIGFzc2VydCBkaXNhc20oIlx4MmNceDA4Iikub3BlcmFuZHNbMF0ucmVnID09IDgKICAgIGFzc2VydCBkaXNhc20oIlx4MmNceDA4Iikub3BlcmFuZHNbMV0udmFsdWUgPT0gMzIKICAgIGFzc2VydCBkaXNhc20oIlx4MWNceDY4Iikub3BlcmFuZHNbMV0udmFsdWUgPT0gMjIKICAgIGFzc2VydCBkaXNhc20oIlx4NGNceDAwIikub3BlcmFuZHNbMV0udmFsdWUgPT0gNjQKICAgIGFzc2VydCBkaXNhc20oIlx4NmNceDExIikub3BlcmFuZHNbMV0udmFsdWUgPT0gLTMxCg=='